<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">
<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>
<!-- 각 페이지의 CSS가 작성될 위치 -->
<th:block layout:fragment="css">
    <style>
    </style>
</th:block>

<div layout:fragment="content">
    <!-- site content
        ================================================== -->
    <div class="s-content content">
        <main class="row content__page">
            <section class="column large-full entry format-standard article-card">
                <div class="media-wrap">
                    <div style="display: flex; justify-content: center;">
                        <swiper-container class="mySwiper" pagination="true">
                            <swiper-slide th:each="postImage, status:${postImgDtos}">
                                <img th:src="${postImage.imageUrl}" th:alt="${postImage.oriImageName}"/>
                            </swiper-slide>
                        </swiper-container>
                    </div>
                </div>

                <div class="content__page-header">
                    <h1 class="display-1" th:text="${post.subject}">글제목</h1>
                </div>
                <!-- end content__page-header -->

                <p th:text="${post.content}">본문... 현재 보이는 한칸 반복 - 댓글은 페이징처리</p>

                <div class="comments-wrap">
                    <div id="comments" class="column large-12">

                        <h3 class="h2">댓글</h3>

                        <!-- START commentlist -->
                        <ol class="commentlist">
                            <li class="depth-1 comment" th:each="comment, status:${comments.getContent()}">
                                <div class="comment__avatar">
                                    <img class="avatar" th:src="${comment.member.profileImgUrl}" alt=""
                                         width="50" height="50"/>
                                </div>

                                <div class="comment__content">
                                    <div class="comment__info">
                                        <div class="comment__author" th:text="${comment.member.nickname}">닉네임</div>

                                        <div class="comment__meta">
                                            <div class="comment__time" th:text="${comment.regTime}">작성일</div>
                                            <div class="comment__reply"></div>
                                        </div>
                                    </div>

                                    <div class="comment__text">
                                        <p th:text="${comment.content}">댓글내용</p>
                                    </div>


                                </div>

                            </li>
                            <!-- end comment level 1 -->
                            <div class="row" th:if="${!comments.isEmpty()}">
                                <div class="column large-full">
                                    <nav class="pgn">
                                        <ul>
                                            <li th:classappend="${comments.hasPrevious} ? '' : 'disabled' ">
                                                <a class="pgn__prev" th:href="@{|?page=${comments.number-1}|}">Prev</a>
                                            </li>
                                            <li th:each="page: ${#numbers.sequence(0, comments.getTotalPages()-1)}"
                                                th:if="${page >= comments.number-5 and page <= comments.number+5}"
                                                th:classappend="${page == comments.number} ? 'active'">
                                                <a class="pgn__num current page" th:href="@{|?page=${page}|}" th:text="${page} + 1">1</a>
                                            </li>
                                            <li th:classappend="${!comments.hasNext} ? '' : 'disabled'">
                                                <a class="pgn__next" th:href="@{|?page=${comments.number+1}|}">Next</a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </ol>
                        <!-- END commentlist -->
                    </div>
                    <!-- end comments -->

                    <div class="column large-12 comment-respond">
                        <!-- START respond -->
                        <div id="respond">
                            <h3 class="h2">댓글</h3>
                            <hr/>
                            <form name="commentForm" id="commentForm" method="post"
                                  th:action="'/addComment/' + ${post.postNo}" th:object="${commentFormDto}"
                                  autocomplete="off">
                                <fieldset>
                                    <div class="form-field">
                                        <div class="message form-field">
						<textarea name="cMessage" id="cMessage" class="full-width" th:field="*{content}"
                                  placeholder="댓글입력"></textarea>
                                        </div>
                                        <input name="submit" id="submit"
                                               class="btn btn--primary btn-wide btn--large full-width"
                                               value="전송" type="submit"/>
                                    </div>
                                </fieldset>
                            </form>
                            <!-- end form -->
                        </div>
                        <!-- END respond-->
                    </div>
                    <!-- end comment-respond -->
                </div>
                <!-- end comments-wrap -->
            </section>
        </main>
    </div>

    <!-- 각 페이지의 스크립트가 작성될 위치 -->
    <th:block layout:fragment="script">
        <script th:inline="javascript">

        </script>
    </th:block>
</html>